(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,n,t){},116:function(e,n,t){e.exports=t(223)},136:function(e,n,t){},223:function(e,n,t){"use strict";t.r(n);var a=t(20),o=t(21),c=t(26),r=t(22),i=t(27),u=t(0),s=t.n(u),l=t(53),p=t.n(l),d=t(25),h=t(16),v=t(77),b=t(47),m=t(15),g="SET_APP_READY",f="GET_COUPONS_FROM_BASE",y="GET_INIT_COUPONS_FROM_BASE",O="SET_ACTIVE_COUPON",C="OPEN_COPY_MODAL",E="CLOSE_COPY_MODAL",j="GET_STORE_LANG",w="GET_CURRENCY",S="SHOW_PRINT",_="HIDE_PRINT",k=t(28),A={selectedCoupon:"",coupons:[],isCouponsLoaded:!0,isCouponsLoading:!1,print:!1,aplication:{ready:!1},modal:{show:!1},storeLang:"",currency:""},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case y:return Object(m.a)({},e,{isCouponsLoading:!0});case f:var t=k.c(function(e,n){return e.name===n.name&&e.id===n.id},Object(b.a)(e.coupons).concat(Object(b.a)(n.payload.items)));return Object(m.a)({},e,{coupons:t,isCouponsLoaded:n.payload.total===Object(b.a)(e.coupons).concat(Object(b.a)(n.payload.items)).length||0===n.payload.count,isCouponsLoading:!1,total:n.payload.total});case C:case E:return Object(m.a)({},e,{modal:{show:n.payload}});case g:return Object(m.a)({},e,{aplication:{ready:n.payload}});case O:return Object(m.a)({},e,{selectedCoupon:n.payload});case j:return Object(m.a)({},e,{storeLang:n.payload});case S:return Object(m.a)({},e,{print:!0});case _:return Object(m.a)({},e,{print:!1});default:return e}},P=Object(h.c)({couponReducer:L}),R=t(78),T=t.n(R),N=(Object(h.d)(P,Object(h.a)(v.a,T.a)),Object(h.d)(P,Object(h.a)(v.a,T.a))),M=(t(136),t(75)),x=t.n(M),I=t(54),B=t.n(I);function D(e,n,t){var a="object"!=typeof e?JSON.parse(e):e,o="";if(o+=n+"\r\n\n",t){var c="";for(var r in a[0])c+=r+",";o+=(c=c.slice(0,-1))+"\r\n"}for(var i=0;i<a.length;i++){c="";for(var r in a[i])c+=a[i][r]+",";c.slice(0,c.length-1),o+=c+"\r\n"}if(""!=o)return o;alert("Invalid data")}document.createElement("table"),document.createElement("tr"),document.createElement("th"),document.createElement("td");var J=t(46),U=t(104),G=t(58),V=t.n(G),K=window.EcwidApp;K.init({app_id:"multiple-coupons-dev",autoloadedflag:!0,autoheight:!0});var W=K.getPayload(),Y=W.store_id,H=W.access_token,F=t(56),$=window.EcwidApp;var q=t(105),z=t.n(q),Q=t(224),X=t(14),Z=function(e){function n(e){var t,o,i;return Object(a.a)(this,n),(t=Object(c.a)(this,Object(r.a)(n).call(this,e))).downloadCsv=function(){var e=t.getActiveSetCoupons(),n=[];for(var a in e[0])e[0].hasOwnProperty(a)&&a.length>0&&n.push(a);try{var o=new U.Parser({fields:n}).parse(e);o.match(/^data:text\/csv/i)||(o="data:text/csv;charset=utf-8,"+o),o=encodeURI(o);var c=document.createElement("a");c.setAttribute("href",o),c.setAttribute("download","coupons.csv"),c.click()}catch(r){console.error(r)}},t.state={lang:""},o=Object(J.a)(Object(J.a)(t)),i=["openModal","printCoupons","getActiveSetCoupons","getTranslate"],x.a.isString(i)&&(i=[i]),i.forEach(function(e){return o[e]=o[e].bind(o)}),t}return Object(i.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setState({lang:this.props.storeLang})}},{key:"componentWillReceiveProps",value:function(){this.setState({lang:this.props.storeLang})}},{key:"openModal",value:function(){this.props.openCopyModal()}},{key:"printCoupons",value:function(){!function(e,n){var t=function(e,n){return"<div>\n        <h1>".concat(e,'</h1>\n          <div style="padding: 20px;\n                      background: rgba(0,0,0,.1);\n                      border-radius: 8px;\n                      margin-bottom: 40px;"\n          >\n            ').concat(n,"\n          </div>\n      </div>\n      ")},a=t("JSON: ".concat(n),JSON.stringify(e)),o=t("CSV: ".concat(n),D(e,n)),c=t("TABLE: ".concat(n),B()(e)),r="<html>\n      <head>\n        <style>\n          table{\n            border-collapse: collapse;\n          }\n          td,th{\n            border: 1px solid gray;\n            padding: 5px;\n          }\n        </style>\n      </head>\n      <body>\n        ".concat(a,"\n        ").concat(o,"\n        ").concat(c,"\n      </body>\n    </html>"),i="data:text/html;charset=utf8,"+encodeURIComponent(r);window.open(i)}(this.getActiveSetCoupons(),this.props.selectedCoupon.name)}},{key:"getActiveSetCoupons",value:function(){var e=this,n=[];return this.props.coupons.forEach(function(t,a){t.name===e.props.selectedCoupon.name&&n.push(t)}),n}},{key:"getTranslate",value:function(e){return{en:{title:"Please select coupon you want to manage",copy:"Copy coupon",print:"Print coupon",downloadCsv:"Download CSV"},ru:{title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0443\u043f\u043e\u043d",copy:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0443\u043f\u043e\u043d\u044b",print:"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u043a\u0443\u043f\u043e\u043d\u044b",downloadCsv:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c CSV"}}["ru"===this.state.lang?"ru":"en"][e]}},{key:"render",value:function(){var e=window.location.hash;return s.a.createElement("aside",{className:z.a.Aside,style:{paddingTop:100}},s.a.createElement("div",{style:{padding:10,background:"#fff"}},s.a.createElement("h2",null,s.a.createElement(X.a,{i18nKey:"aside.title"})),s.a.createElement("div",null,s.a.createElement(Q.a,{onClick:this.openModal,disabled:k.a(this.props.selectedCoupon)},s.a.createElement(X.a,{i18nKey:"aside.copy"}))),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(Q.a,{onClick:this.props.showPrint,disabled:k.a(this.props.selectedCoupon)},s.a.createElement(X.a,{i18nKey:"aside.print"}))),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(Q.a,{onClick:this.downloadCsv,disabled:k.a(this.props.selectedCoupon)},s.a.createElement(X.a,{i18nKey:"aside.download_\u0441sv"}))),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(Q.a,{type:"primary",href:"https://pvpshoot.github.io/couponManager__Build/couponManager/app.html?".concat(e)},s.a.createElement(X.a,{i18nKey:"aside.old_design"})))))}}]),n}(s.a.Component);Object(d.b)(function(e){return{modal:e.couponReducer.modal,selectedCoupon:e.couponReducer.selectedCoupon,coupons:e.couponReducer.coupons,storeLang:e.couponReducer.storeLang}},{openCopyModal:function(){return{type:C,payload:!0}},showPrint:function(){return{type:S}}})(Z);var ee=function(e){function n(){var e,t;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return(t=Object(c.a)(this,(e=Object(r.a)(n)).call.apply(e,[this].concat(i)))).getActiveSetCoupons=function(){var e=[];return t.props.coupons.forEach(function(n,a){n.name===t.props.selectedCoupon.name&&e.push(n)}),e},t}return Object(i.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){var e=this.props.selectedCoupon.name,n=this.getActiveSetCoupons();return s.a.createElement("div",null,s.a.createElement(Q.a,{onClick:this.props.hidePrint},"Go back"),s.a.createElement("div",{dangerouslySetInnerHTML:{__html:function(e,n){var t=function(e,n){return"<div>\n          <h1>".concat(e,'</h1>\n            <div style="padding: 20px;\n                        background: rgba(0,0,0,.1);\n                        border-radius: 8px;\n                        margin-bottom: 40px;"\n            >\n              ').concat(n,"\n            </div>\n        </div>\n        ")},a=t("JSON: ".concat(n),JSON.stringify(e)),o=t("CSV: ".concat(n),D(e,n)),c=t("TABLE: ".concat(n),B()(e));return"\n          ".concat(a,"\n          ").concat(o,"\n          ").concat(c,"\n    ")}(n,e)}}))}}]),n}(s.a.Component),ne=(Object(d.b)(function(e){return{selectedCoupon:e.couponReducer.selectedCoupon,coupons:e.couponReducer.coupons}},{hidePrint:function(){return{type:_}}})(ee),function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(c.a)(this,Object(r.a)(n).call(this,e))).state={data:""},t}return Object(i.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.getSoreLang(),this.props.getCurency()}},{key:"render",value:function(){return s.a.createElement("h1",null,"Aside")}}]),n}(s.a.Component));var te=k.b(Object(d.b)(function(e){return{storeLang:e.couponReducer.storeLang,print:e.couponReducer.print}},{getSoreLang:function(){var e=$.getPayload();return F.a.changeLanguage(e.lang),{type:j,payload:e.lang}},getCurency:function(){return function(e){return V()("https://app.ecwid.com/api/v3/".concat(Y,"/profile?token=").concat(H)).then(function(n){return e({type:w,payload:n.data.formatsAndUnits.currency})})}}}),Object(X.c)("translation"))(ne);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=t(113),oe=t.n(ae);F.a.use(oe.a).use(X.b).init({fallbackLng:"en",debug:!0,backend:{loadPath:"locales/{{lng}}/{{ns}}.json"},interpolation:{escapeValue:!1},react:{wait:!0}});var ce=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(c.a)(this,Object(r.a)(n).call(this,e))).state={},t}return Object(i.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){return s.a.createElement(d.a,{store:N},s.a.createElement(te,null))}}]),n}(s.a.Component);p.a.render(s.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[116,2,1]]]);
//# sourceMappingURL=main.674a1276.chunk.js.map